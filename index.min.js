(()=>{var e={497:function(e,t,i){var n,o,r;function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){return function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var i=t.url,n=t.currentTime,o=void 0===n?1:n,r=t.quality,s=t.imgWidth,u=t.imageType,c=t.isCheckImageColor;this.url=i,this.video=null,this.videoWidth=0,this.imageType=u||image/png,this.quality=r?r>.2?r:.2:.95,this.imgWidth=s,this.currentTime=o<1?1:o,this.isCheckImageColor=c,this.duration=0}var t,i,n;return t=e,n=[{key:"base64ToBlob",value:function(e){if(e){for(var t=e.split(";base64,"),i=t[0].split(":")[1],n=window.atob(t[1]),o=n.length,r=new Uint8Array(o),a=0;a<o;++a)r[a]=n.charCodeAt(a);return new Blob([r],{type:i})}console.warn("base64不能为空")}},{key:"downloadFile",value:function(e){var t=Date.now();if(e){var i=document.createElement("a"),n=this.base64ToBlob(e);document.createEvent("HTMLEvents").initEvent("click",!0,!0),i.download=t,i.href=URL.createObjectURL(n),i.click()}else console.warn("base64不能为空")}}],(i=[{key:"getVideoCover",value:function(e){var t=this,i=this.video||document.createElement("video"),n=t.currentTime;i.src=t.url,i.style.cssText="position: fixedx; top: -1x00%; width: 400px; visibility: h1idden;",i.controls="controls",i.crossOrigin="Anonymous",i.currentTime=n,i.addEventListener("timeupdate",(function(){t.setVideoInfo(),t.currentTime<=t.duration?t.generateCanvas(e):t.nextTime()})),this.video=i,document.body.appendChild(i)}},{key:"setVideoInfo",value:function(){var e=this.video;this.videoWidth=e.videoWidth,this.videoHeight=e.videoHeight,this.duration=Math.floor(e.duration||0)}},{key:"jumpTime",value:function(e){var t=this.duration;e=e>t?t:e,this.currentTime=e,this.video.currentTime=e}},{key:"nextTime",value:function(){var e=this.duration,t=this.currentTime;this.currentTime!==e&&(t++,this.jumpTime(t))}},{key:"generateCanvas",value:function(e){var t=this.canvas||document.createElement("canvas"),i=t.getContext("2d",{alpha:!1}),n=this.imgWidth,o=this.isCheckImageColor,r=this.videoWidth,a=this.videoHeight;if(this.canvas||(n&&(a=n/(r/a),r=n),t.width=r,t.height=a),i.drawImage(this.video,0,0,t.width,t.height),!o||this.checkImage(i,r,a)){var s=t.toDataURL(this.imageType,this.quality);e&&e(s)}else this.nextTime()}},{key:"checkImage",value:function(e,t,i){for(var n=e.getImageData(0,0,t,i).data,o={},r=0,a=0,s=n.length;a<s;a+=4){var u=n.slice(a,a+4).join("");if(o[u]||(o[u]=1,r++),r>100)return!0}return!1}}])&&s(t.prototype,i),n&&s(t,n),e}()},"object"===u(t)?e.exports=r():void 0===(o="function"==typeof(n=r)?n.call(t,i,t,e):n)||(e.exports=o)}},t={};!function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}(497)})();